---
/**
 * 어드민 대시보드 진입점
 *
 * - AuthGuard(client:load)로 감싸서 미인증 시 /admin/login 으로 리다이렉트한다.
 * - 실제 대시보드 UI는 AdminDashboard 컴포넌트에서 렌더링한다.
 * - robots noindex: 검색 엔진에 노출되지 않도록 한다.
 */
import "@/styles/global.css";
import AuthGuard from "@/components/admin/AuthGuard";
import AdminDashboard from "@/components/admin/AdminDashboard";
import ThemeLoader from "@/components/ThemeLoader";

const colorScheme = (import.meta.env.PUBLIC_COLOR_SCHEME ?? "gray") as string;
const validScheme = [
    "blue",
    "gray",
    "beige",
    "blackwhite",
    "forest",
    "sunset",
    "lavender",
].includes(colorScheme)
    ? colorScheme
    : "gray";
---

<!doctype html>
<html lang="ko" data-color-scheme={validScheme}>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Admin — FoliumOnline</title>
        <link rel="icon" type="image/svg+xml" href="/favicon-admin.svg" />
        <meta name="robots" content="noindex, nofollow" />
        {/* 다크모드 깜빡임 방지 */}
        <script is:inline>
            (function () {
                const theme = localStorage.getItem("theme") || "system";
                const systemDark = window.matchMedia(
                    "(prefers-color-scheme: dark)"
                ).matches;
                if (theme === "dark" || (theme === "system" && systemDark)) {
                    document.documentElement.classList.add("dark");
                }
            })();
        </script>
    </head>
    <body class="min-h-screen bg-(--color-surface) text-(--color-foreground)">
        <ThemeLoader client:load />
        <AuthGuard client:load>
            <AdminDashboard client:load />
        </AuthGuard>
    </body>
</html>
